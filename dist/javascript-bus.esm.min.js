function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray(e,r){var t;if(e)return"string"==typeof e?_arrayLikeToArray(e,r):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var JavascriptBus=function(){function e(){_classCallCheck(this,e),this.eventBus={}}return _createClass(e,[{key:"on",value:function(e,r,t){if("string"!=typeof e)throw new TypeError("the event name must be string type.");if("function"!=typeof r)throw new TypeError("the event callback must be function type.");var n=this.eventBus[e];return n||(this.eventBus[e]=n=[]),n.push({eventCallback:r,pointer:t}),this.off.bind(this,e,r)}},{key:"once",value:function(o,a,i){var s=this;if("string"!=typeof o)throw new TypeError("the event name must be string type.");if("function"!=typeof a)throw new TypeError("the event callback must be function type.");this.on(o,function e(){s.off(o,e);for(var r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];a.apply(i,t)},i)}},{key:"off",value:function(e,t){if("string"!=typeof e)throw new TypeError("the event name must be string type.");var n=this.eventBus[e];!n||"function"==typeof t&&(_toConsumableArray(n).forEach(function(e,r){e.eventCallback===t&&n.splice(r,1)}),0!==n.length)||delete this.eventBus[e]}},{key:"emit",value:function(e){for(var r=this,t=arguments.length,n=new Array(1<t?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var a=Array.isArray(e);if("string"!=typeof e&&!a)throw new TypeError("the event name must be of string or array type");a?e.forEach(function(e){if("string"!=typeof e)throw new TypeError("the event name must be string type.");r.emit(e,n)}):(a=this.eventBus[e])&&a.forEach(function(e){e.eventCallback.apply(e.pointer,n)})}}]),e}();export{JavascriptBus as default};
