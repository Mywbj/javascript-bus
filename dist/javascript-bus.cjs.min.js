"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray(e,t){var r;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(r="Object"===(r=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var JavascriptBus=function(){function e(){_classCallCheck(this,e),this.eventBus={}}return _createClass(e,[{key:"on",value:function(e,t,r){if("string"!=typeof e)throw new TypeError("the event name must be string type.");if("function"!=typeof t)throw new TypeError("the event callback must be function type.");var n=this.eventBus[e];return n||(this.eventBus[e]=n=[]),n.push({eventCallback:t,pointer:r}),this.off.bind(this,e,t)}},{key:"once",value:function(o,a,i){var u=this;if("string"!=typeof o)throw new TypeError("the event name must be string type.");if("function"!=typeof a)throw new TypeError("the event callback must be function type.");this.on(o,function e(){u.off(o,e);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];a.apply(i,r)},i)}},{key:"off",value:function(e,r){if("string"!=typeof e)throw new TypeError("the event name must be string type.");if("function"!=typeof r)throw new TypeError("the event callback must be function type.");var n=this.eventBus[e];n&&(_toConsumableArray(n).forEach(function(e,t){e.eventCallback===r&&n.splice(t,1)}),0===n.length&&delete this.eventBus[e])}},{key:"emit",value:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if("string"!=typeof e)throw new TypeError("the event name must be string type.");e=this.eventBus[e];e&&e.forEach(function(e){e.eventCallback.apply(e.pointer,r)})}}]),e}();module.exports=JavascriptBus;
